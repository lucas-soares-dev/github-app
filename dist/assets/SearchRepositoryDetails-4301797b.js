import{d as C,a as P,b as R,P as F,S as D,c as B,H}from"./SkeletonBlock-ebabb4b5.js";import{e as N,_ as I,r as _,o as a,c as i,a as s,t as n,F as m,f as h,g as y,w as b,k as L,j as T,b as l,p as V,i as q,h as j,n as $}from"./index-cbf67802.js";import"./SearchInput-75409747.js";const z=e=>({title:e.title,url:e.html_url,number:e.number,owner:{name:e.user.login},labels:e.labels.map(t=>({name:t.name,color:`#${t.color}`,description:t.description})),comments_count:e.comments,opened:C(e.created_at)}),A=N("githubRepositoryIssuesStore",{state:()=>({loading:!0,repositoryFullname:"",currentPage:1,perPage:25,issuesCount:0,issuesCountFormatted:"0",issues:[]}),actions:{async fetchIssues(e=1){try{this.loading=!0,this.currentPage=e>0?e:1;const t=await P.get(`/repos/${this.repositoryFullname}/issues`,{params:{page:this.currentPage,per_page:this.perPage}});this.issuesCount=this.handleIssuesCount(t),this.issuesCountFormatted=R(this.issuesCount),this.issues=t.data.map(c=>z(c))}catch(t){console.error("Error fetching issues: ",t)}finally{this.loading=!1}},setRepositoryFullname(e,t){this.repositoryFullname=`${e}/${t}`},handleIssuesCount(e){const{data:t,headers:c}=e,u=(c.link||"").match(/<[^>]*\?page=(\d+)&per_page=\d+>; rel="last"/)||[];return u[1]?this.perPage*u[1]:t.length!=0&&this.issuesCount>0?this.issuesCount:t.length}}});const E={name:"Issues",components:{Pagination:F,Skeleton:D,SkeletonBlock:B},setup(){return{store:A()}},created(){const{username:e,reponame:t}=this.$route.params,c=this.$route.query.p;this.store.setRepositoryFullname(e,t),this.store.fetchIssues(c)}},x=e=>(V("data-v-52600da9"),e=e(),q(),e),G={class:"repository-issues"},M={class:"border border-dark rounded"},J={class:"repository-issues__header bg-dark--muted p-3 border-bottom border-dark"},K={class:"repository-issues__count"},O={class:"mb-0 font-14"},Q=x(()=>s("span",{class:"fa-regular fa-circle-dot"},null,-1)),U=x(()=>s("small",{class:"d-none"},"Issues list: ",-1)),W={class:"ml-2"},X={class:"repository-issues__list"},Y=x(()=>s("div",{class:"repository-issues__item-icon"},[s("span",{class:"fa-regular fa-circle-dot"})],-1)),Z={class:"ml-2 col px-0"},ss={class:"repository-issues__item-infos d-flex flex-wrap align-items-center"},es={class:"repository-issues__item-title"},ts={class:"mb-0 mr-2 font-16"},os=["href"],as={class:"repository-issues__item-tags d-flex flex-wrap"},rs={class:"text-light"},ns={class:"repository-issues__item-details mt-2 font-13 text-muted"},is={class:"code"},ls={class:"opened ml-1"},cs={class:"owner ml-1"};function ds(e,t,c,r,u,k){const f=_("router-link"),d=_("skeleton-block"),g=_("skeleton"),p=_("Pagination");return a(),i("section",G,[s("div",M,[s("div",J,[s("div",K,[s("h2",O,[Q,U,s("span",W,n(r.store.issuesCountFormatted)+" results",1)])])]),s("div",X,[r.store.loading?(a(!0),i(m,{key:1},h(r.store.perPage,o=>(a(),y(g,{class:"border-bottom border-dark px-3 pt-3 pb-2"},{default:b(()=>[l(d,{w:"67%",h:"15px",class:"rounded"}),l(d,{w:"7%",h:"15px",class:"rounded ml-2 ml-lg-4"}),l(d,{w:"7%",h:"15px",class:"rounded ml-2 ml-lg-4"}),l(d,{w:"7%",h:"15px",class:"rounded ml-2 ml-lg-4"}),l(d,{w:"40%",h:"10px",class:"rounded mt-1"})]),_:1}))),256)):(a(!0),i(m,{key:0},h(r.store.issues,(o,w)=>(a(),i("article",{class:"repository-issues__item d-flex border-bottom border-dark px-3 py-3 py-lg-2",key:w},[Y,s("div",Z,[s("div",ss,[s("div",es,[s("h3",ts,[s("a",{class:"text-light",href:o.url,target:"_blank"},n(o.title),9,os)])]),s("div",as,[(a(!0),i(m,null,h(o.labels,(v,S)=>(a(),y(f,{to:"#",class:"repository-issues__item-tag font-12",key:S,style:L({background:v.color})},{default:b(()=>[s("span",rs,n(v.name),1)]),_:2},1032,["style"]))),128))])]),s("div",ns,[s("span",is,"#"+n(o.number),1),s("span",ls,"opened on "+n(o.opened),1),s("span",cs,"by "+n(o.owner.name),1)])])]))),128))])]),r.store.loading?T("",!0):(a(),y(p,{key:0,class:"mt-5",per_page:r.store.perPage,items_count:r.store.issuesCount,onToPage:t[0]||(t[0]=o=>r.store.fetchIssues(o))},null,8,["per_page","items_count"]))])}const _s=I(E,[["render",ds],["__scopeId","data-v-52600da9"]]);const ps={name:"SearchRepositoryDetails",components:{Header:H,RepositoryIssues:_s},data:()=>({showHeaderDrawer:!1}),computed:{title(){const{username:e,reponame:t}=this.$route.params;return`${e} / ${t}`},navItems(){return[{title:"Code",path:"#",icon:"fa-solid fa-code"},{title:"Issues",path:"#",icon:"fa-regular fa-circle-dot",active:!0},{title:"Pull requests",path:"#",icon:"fa-solid fa-code-pull-request"},{title:"Discussions",path:"#",icon:"fa-regular fa-comments"},{title:"Actions",path:"#",icon:"fa-regular fa-circle-play"},{title:"Projects",path:"#",icon:"fa-solid fa-table-list"},{title:"Security",path:"#",icon:"fa-solid fa-shield-halved"},{title:"Insights",path:"#",icon:"fa-solid fa-chart-line"}]}}},us={class:"repository-details"},ms={class:"repository-details__main"},hs={class:"repository-details__header pt-4"},fs={class:"repository-title d-flex align-items-center mb-4 px-2 px-lg-4"},gs={class:"h5 text-primary mb-0 ml-2 font-weight-normal"},ys=s("span",{class:"fa-solid fa-box-open text-muted"},null,-1),bs=s("small",{class:"d-none"},"Issues: ",-1),xs=s("small",{class:"text-muted"}," / ",-1),ks=s("p",{class:"repository-type border border-dark my-0 ml-2 px-2 font-12 text-muted"},"Public",-1),vs={class:"repository-details__nav nav border-bottom border-dark px-2 px-lg-4"},$s={class:"ml-2 font-13"},Is={class:"repository-details__content container-xl px-3 py-4"};function ws(e,t,c,r,u,k){const f=_("Header"),d=_("router-link"),g=_("RepositoryIssues");return a(),i("div",us,[l(f),s("main",ms,[s("div",hs,[s("div",fs,[s("h2",gs,[ys,bs,j(" "+n(e.$route.params.username)+" ",1),xs,s("strong",null,n(e.$route.params.reponame),1)]),ks]),s("ul",vs,[(a(!0),i(m,null,h(k.navItems,(p,o)=>(a(),i("li",{key:o,class:$(["nav-item",{active:p.active}])},[l(d,{to:"#",class:"nav-link text-light"},{default:b(()=>[s("span",{class:$(["text-muted",p.icon])},null,2),s("span",$s,n(p.title),1)]),_:2},1024)],2))),128))])]),s("div",Is,[l(g)])])])}const Rs=I(ps,[["render",ws]]);export{Rs as default};
